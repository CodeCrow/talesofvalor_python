{% extends "base.html" %}
{% load cms_tags utils %}

{% block title %}{{ object.name }}{% endblock title %}

{% block content %}
Player: {{ object.player }}
<h1>Pick skills for {{ object.name }}{% if object.active_flag %} (active){% endif %}</h1>
<form action="" method="post">{% csrf_token %}
    {% include "characters/includes/character_stats.html" with object=object %}
    {% for header in skills %}
    {% with skill_hash|dict_key:header.id as header_costs %}
    <div class="header-group group">
        <h2><a href="{% url "skills:header_detail" pk=header.id %}">{{ header.name }}</a>&nbsp;{% if header_costs.cost %}({{ header_costs.cost }} CPs){% endif %}</h2>
        <ul class="skill-group group">
            {% for skill in header.skills.all %}
            <li>
                <a href="{% url "skills:skill_detail" pk=skill.id %}">{{ skill.name }}</a>&nbsp;
                {% with header_costs|dict_key:skill.id as skill_cost %}
                {% if skill_cost %}( {{ skill_cost }} CPs each){% endif %}
                {% endwith %}
            </li>
            {% endfor %}
        </ul>
    </div>
    {% endwith %}
    {% endfor %}
        <tr>
            <td colspan="2" class="text-right">
                <input type="submit" value="Update" />
            </td>
        </tr>
    </table>
</form>
{% endblock content %}