{% extends "base.html" %}
{% load cms_tags sekizai_tags %}

{% block bar_title %}{{ object.name }} : Skills{% endblock bar_title %}
{% block title %}{{ object.name }}{% endblock title %}

{% block content %}
<form action="" method="post">{% csrf_token %}
    {{ headerskill_formset.management_form }}
    <table class="data">
        {{ form.as_table }}
    </table>
    <table id="header_inline" class="list">
        <tr>
            <th>Header</th>
            <th>Cost</th>
            <th>Can Dabble</th>
            {% if headerskill_formset.can_delete %}
                <th>Remove</th>
            {% endif %}
        </tr>
        <tbody>
        {% for form in headerskill_formset %}
            {{ form.id }}
            CAN DELETE{{ headerskill_formset.can_delete }}
            <tr>
                <td>{{ form.header }}</td>
                <td>{{ form.cost }}</td>
                <td>{{ form.dabble_flag }}</td>
                {% if headerskill_formset.can_delete %}
                    <td>{{ form.DELETE }}</td>
                {% endif %}
            </tr>
        {% endfor %}
        </tbody>
    </table>        

        {{ rule_formset.management_form }}
        {% for form in rule_formset %}
            {{ form.id }}
            {{ form }}
        {% endfor %}

        {{ prerequisite_formset.management_form }}
        {% for form in prerequisite_formset %}
            {{ form.id }}
            {{ form }}
        {% endfor %}
    <div class="text-right">
        <input class="btn btn-primary" type="submit" value="Update" />
        {% if object.id %}
        	<a href="{% url "skills:header_delete" pk=object.id %}" class="btn btn-danger">Delete</a></td>
        {% endif %}
    </div>
</form>

{% addtoblock "js" %}
<script type="text/javascript">
    $(function() {
        $('#header_inline tbody tr').formset({
            prefix: '{{ headerskill_formset.prefix }}',
            hideLastAddForm: true
        });
    });
</script>
{% endaddtoblock %}

{% endblock content %}